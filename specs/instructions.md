# I. Membership E-badge System 产品（业务）需求

会员徽章管理系统旨在为会员运营工作提供全面、高效的徽章管理支持，通过对徽章的创建、发放、使用、回收等全流程进行有效管控，增强会员与平台的互动性，提升会员忠诚度，助力会员运营工作的顺利开展。

迪士尼的徽章体系将使用游戏化的方式，围绕会员的完整生命周期，设计丰富多样的徽章。无论是新会员，还是迪士尼的忠实粉丝，都能通过完成指定任务获取徽章，并且可以兑换徽章来享受对应的专属权益。

## 1. 徽章创建配置

### 1.1 徽章类型和属性设置

#### 1.1.1 支持3个层级的徽章结构设置，可灵活进行增删改等配置操作（备注：第一层级和第二层级主要用于分类和数据统计，第三层级徽章为实际发放给用户的徽章）

#### 1.1.2 徽章支持多种类型，可灵活进行增删改等配置操作，不同类型的徽章对应的徽章发放规则可以不同（比如：会员行为触发，徽章获得情况触发）

#### 1.1.3 基本属性配置，包含：徽章名称、所属层级、徽章类型、唯一标识ID、描述、徽章状态（有效/无效）、徽章获得/兑换规则、徽章对应权益，等等

### 1.2 徽章发放对象设置

支持发放给2种类型的用户，并且每一个徽章均可单独设置对应的发放对象

#### 1.2.1 发给会员账号注册人，即完成相应徽章任务时所登录的迪士尼账号

#### 1.2.2 发给实际使用人，即购买产品并最终实际使用产品的人，徽章发放到该用户对应的迪士尼账号，主要用于交易场景

### 1.3 获取徽章的任务设置
#### 1.3.1 徽章任务涵盖多样化场景，支持对接迪士尼的内部系统获取相关的场景事件，包含：

- 新账号注册
- 个人信息完善（例如：生日、居住地、邮箱，等等）
- 新增身份（例如：年卡用户、Club 33会员、酒店住客、员工，等等）
- 完成交易（例如：购买门票、购买尊享卡、预定酒店、餐厅消费、商店购物，等等）
- 完成互动行为（例如：关注公众号、浏览指定页面、点击指定按钮、绑定第三方账号，等等）
- 参加季节性活动（例如：参加线上/线下活动、完成指定任务，等等）

#### 1.3.2 徽章任务支持复杂的多维度规则配置，规则内支持设置多个条件组合，条件间支持「且/或」逻辑，至少支持3层嵌套关系

#### 1.3.3 单个条件内的配置包含元数据、操作符和值

#### 1.3.4 元数据支持多种类型，包含：数值、布尔、字符串、时间、日期、列表等等

#### 1.3.5 基于元数据类型，操作符支持提供不同的选项，至少包含以下选项

#### 1.3.6 基于元数据类型，值的输入框支持不同的交互，包含：数字输入、开关、字符串输入、时间选择、日历选择、下拉选项等等

#### 1.3.7 多维度的规则配置支持单独部署和运行，除徽章系统外，也支持对接迪士尼其他系统完成规则配置和运行

### 1.4 获取徽章的时间段设置

时间段设置支持3种模式，时间精确到秒

#### 1.4.1 固定时间范围：灵活设置开始和结束日期/时间，仅在设置的时间段内可获得徽章

#### 1.4.2 开口时间范围：支持仅设置开始日期/时间或者仅设置结束日期/时间，仅在设置的开始日期/时间后或者结束日期/时间前可获得徽章

#### 1.4.3 永久时间范围：无需设置具体日期/时间，一直可获得徽章

### 1.5 徽章获得次数上限设置

次数上限设置支持2种模式

#### 1.5.1 支持设置徽章可获得次数的最大值

#### 1.5.2 支持设置无限次

### 1.6 徽章持有有效期设置

有效期设置支持3种模式，时间精确到秒

#### 1.6.1 固定有效期：支持设置具体日期/时间，无论获取徽章的日期/时间，徽章都会在设定的具体日期/时间后过期

#### 1.6.2 灵活有效期：支持设置徽章获取后N天/月/年后过期

#### 1.6.3 永久有效期：除徽章因不满足获取条件取消外，获得的徽章永不过期

### 1.7 徽章素材设置

#### 1.7.1 支持上传自定义图片（包含静态和动态），图片格式包括PNG/JPG/SVG/WEBP/HEIC/GIF等等

#### 1.7.2 支持上传3D效果的徽章，可360°旋转预览

#### 1.7.3 有素材库可存储、查看和下载所有上传过的徽章素材，支持通过格式、上传时间等进行筛选

## 2. 徽章发放配置

### 2.1 徽章自动发放机制（实时事件触发）

实时事件触发的自动发放机制支持2种模式：

#### 2.1.1 根据会员行为自动发放：当会员行为满足设置的任务条件时，系统即刻发放对应的徽章，发放延迟≤1秒

#### 2.1.2 根据徽章获得情况自动发放：当获得某个徽章后，会员名下的徽章类型和数量满足设置的条件时，系统即刻发放对应的徽章，发放延迟≤1秒

### 2.2 徽章自动发放机制（定时触发）

#### 2.2.1 支持设置定时任务，对符合条件的会员发放徽章

#### 2.2.2 定时任务支持单次任务和重复任务，重复任务支持按每日/周/月/年等频次设置

#### 2.2.3 支持在平台中直接配置相关规则圈选符合条件的会员

#### 2.2.4 支持与外部系统对接，从迪士尼的内部系统获取圈选好的会员进行徽章发放

### 2.3 徽章手动发放机制

徽章手动发放支持2种模式，功能仅对有特定账号权限的用户开放

#### 2.3.1 支持对单一会员发放：通过会员ID（SWID）或手机号精准定位，一键发放，支持填写发放备注

#### 2.3.2 支持对批量会员发放：支持Excel或CSV文件导入（字段含会员ID/手机号），单次导入至少支持50万数据，上传提供进度提示

### 2.4 徽章发放通知

#### 2.4.1 徽章发放后可通过多渠道通知告知会员，支持对接迪士尼的内部系统，通知渠道包含APP Notification、短信、微信订阅消息、邮件、页面弹窗等，告知的内容含徽章信息、权益说明及查看入口等

#### 2.4.2 通知发放失败支持手动重发，支持手动圈选符合条件的会员后进行重发

#### 2.4.3 可基于单个徽章设置所需的通知渠道

### 2.5 徽章发放记录

#### 2.5.1 包含详细的发放记录管理，包含：徽章名称、触发徽章发放的任务、徽章发放时间、操作人、会员基本信息、发放状态等记录

#### 2.5.2 发放记录支持多维度筛选并导出Excel或CSV

#### 2.5.3 发放失败支持自动重试，重试次数可配置，重试失败生成清单并自动通知运营人员，支持手动重发

## 3. 徽章取消/过期配置
### 3.1 徽章自动取消

#### 3.1.1 会员获取徽章后，如后续不再满足徽章获取的任务条件（比如：交易取消，账号注销，身份取消，等等），系统需自动取消所获得的徽章

### 3.2 徽章手动取消

徽章手动取消支持3种模式，功能仅对有特定账号权限的用户开放

#### 3.2.1 支持手动对单一会员取消徽章：通过会员ID（SWID）或手机号精准定位，一键取消，需要求填写取消原因

#### 3.2.2 支持系统内筛选数据后批量对会员取消徽章：支持通过筛选发放记录定位到符合条件的会员，批量对这些会员取消徽章，需要求填写取消原因

#### 3.2.3 支持从外部获取数据后批量对会员取消徽章：支持Excel或CSV文件导入（字段含会员ID/手机号/取消原因），单次导入至少支持50万数据，上传提供进度提示

### 3.3 徽章过期

#### 3.3.1 按徽章配置的有效期自动过期，时间精确到秒

### 3.4 徽章取消/过期通知

#### 3.4.1 徽章自动/手动取消和过期，可通过多渠道通知告知会员，支持对接迪士尼的内部系统，通知渠道包含APP Notification、短信、微信订阅消息、邮件、页面弹窗等，告知的内容含徽章信息及查看入口等

#### 3.4.2 通知发放失败支持手动重发，支持手动圈选符合条件的会员后进行重发

#### 3.4.3 徽章过期通知支持2种方式：过期当下通知、过期前X天/周/月提前通知

#### 3.4.4 可基于单个徽章设置所需的通知场景和通知渠道

### 3.5 徽章取消/过期记录

#### 3.5.1 徽章自动/手动取消和过期，系统自动做相应的记录，包含：徽章名称、徽章取消/过期的原因、徽章取消/过期时间、操作人、会员基本信息、徽章状态等记录

#### 3.5.2 取消/过期记录支持多维度筛选并导出Excel或CSV

## 4. 徽章兑换配置
### 4.1 徽章兑换有效期设置

兑换有效期设置支持4种模式，时间精确到秒

#### 4.1.1 固定时间范围：灵活设置开始和结束日期/时间，仅在设置的时间段内可兑换徽章

#### 4.1.2 开口时间范围：支持仅设置开始日期/时间或者仅设置结束日期/时间，仅在设置的开始日期/时间后或者结束日期/时间前可兑换徽章

#### 4.1.3 灵活时间范围：支持设置徽章获取后N天/周/月/年内可兑换徽章

#### 4.1.4 永久时间范围：无需设置具体时间，一直可兑换徽章

### 4.2 徽章兑换频次设置

#### 4.2.1 支持时间维度设置兑换频次，包含：每X天/周/月/年，最多可兑换次数

#### 4.2.2 支持账号维度设置兑换频次，包含：每个迪士尼账号最多可兑换次数

### 4.3 徽章兑换次数设置

#### 4.3.1 支持设置具体次数上限，例如：每1周最多可兑换X次，每个账号最多可兑换X次

#### 4.3.2 支持设置无次数上限，可无限次兑换

### 4.4 徽章兑换条件设置

#### 4.4.1 支持单徽章兑换，支持配置兑换所需的徽章数量

#### 4.4.2 支持多徽章组合兑换，支持配置兑换所需的徽章类型、徽章名称和徽章数量，例如：使用2个交易徽章和1个互动徽章用于兑换

#### 4.4.3 支持手动发起兑换，即会员自主在页面上发起兑换

#### 4.4.4 支持当满足兑换条件时自动发起兑换

### 4.5 兑换通知和记录

#### 4.5.1 徽章兑换完成可通过多渠道通知告知会员，支持对接迪士尼的内部系统，通知渠道包APP Notification、短信、微信订阅消息、邮件、页面弹窗等告知会员，告知的内容含徽章信息、获得的权益以及查看入口等

#### 4.5.2 通知发放失败支持手动重发，支持手动圈选符合条件的会员后进行重发

#### 4.5.3 徽章兑换完成，系统自动做相应的兑换记录，包含：兑换的徽章名称、兑换的徽章数量、徽章兑换时间、获得的权益、操作人、会员基本信息等记录

#### 4.5.4 当徽章成功完成兑换后，徽章可兑换数量需立即更新，数据更新延时≤1秒

### 4.6 徽章与权益关联

#### 4.6.1 支持单徽章关联单权益

#### 4.6.2 支持单徽章关联多权益（权益组）

#### 4.6.3 支持多徽章关联单权益

## 5. 徽章展示配置

### 5.1 徽章不同状态的展示设置

#### 5.1.1 支持预设不同徽章状态下的前端显示类型

| 徽章状态 | 支持的前端显示类型 |
| -------- | ------------------ |
| 未获取 | 是否在页面显示徽章（例如：不显示，显示但置灰） |
| 已获取 | 是否标记有效的徽章数量 |
| 已取消/过期 | 是否在页面显示徽章（例如：不显示，显示但置灰） |
| 已获取并满足兑换权益的要求 | 是否显示权益待兑换/权益已解锁等提示 |
| 已兑换 | 是否在页面显示徽章（例如：不显示，显示但标记兑换状态）；是否标记有效的徽章数量 |

#### 5.1.2 单个徽章下支持分别设置徽章状态的前端显示类型

### 5.2 个人徽章墙展示

个人徽章墙的前端页面由迪士尼提供，但需要提供相应能力和对应接口给前端调用

#### 5.2.1 支持按特定条件进行徽章排序，例如：徽章名称、徽章类型、获取时间、徽章场景，等等

#### 5.2.2 支持按特定条件进行徽章搜索和筛选，例如：徽章名称、徽章类型、获取时间、徽章场景、徽章发放对象，等等

#### 5.2.3 会员可从已获得的徽章中自行选择特定的徽章进行置顶或者佩戴

### 5.3 徽章详情页展示

#### 5.3.1 支持提供相应接口给前端调用，用于徽章详情页上的信息展示，包含：徽章素材、徽章名称、描述、徽章状态、可获取时间段、获取进度条、获取时间、徽章有效期，等等

## 6. 徽章权益管理配置
### 6.1 支持的权益类型

支持如下3种权益类型，权益本身由迪士尼内部系统管理，需对接相应系统完成权益的设置和管理

#### 6.1.1 数字化资产：兑换对应的徽章可获得前往数字化资产中心的资格，进入数字化资产中心可查看并下载提供的壁纸、动图、表情包、电子门票、数字杂志等

#### 6.1.2 优惠券：兑换对应的徽章可获得对应的优惠券（例如：打折券，满减券）

#### 6.1.3 预约资格：换对应的徽章可获得对应的预约资格（包含：餐厅的餐桌预约、乐园活动预约）

### 6.2 权益设置和管理

#### 6.2.1 支持从外部系统同步权益至平台，当权益发生调整时（包含：新增、更新、删除），同步需实时生效，同步延迟≤1秒

#### 6.2.2 权益设置包含名称、描述、使用规则、有效期、可兑换库存、状态等等

#### 6.2.3 支持通过权益类型、权益名称、状态等等多维度筛选权益

#### 6.2.4 权益内容和状态变更记录日志

### 6.3 权益发放机制和记录

#### 6.3.1 支持自动发放，当会员成功兑换徽章后，系统自动发放对应的权益至会员账户下

#### 6.3.2 包含详细的权益发放记录管理，包含：权益名称、权益发放时间、核销的徽章名称、会员基本信息、发放状态等记录

#### 6.3.3 权益发放记录支持多维度筛选并导出Excel或CSV

#### 6.3.4 权益发放失败支持自动重试，重试次数可配置，重试失败生成清单并自动通知运营人员，进行手动发放，支持手动圈选或选择符合条件的会员后进行补发

### 6.4 权益发放通知

#### 6.4.1 权益发放完成可通过多渠道通知告知会员，支持对接迪士尼的内部系统，通知渠道包APP Notification、短信、微信订阅消息、邮件、页面弹窗等告知会员，告知的内容含权益信息以及查看入口等

#### 6.4.2 通知发放失败支持手动重发，支持手动圈选符合条件的会员后进行重发

#### 6.4.3 支持按单个权益设置通知渠道

## 7. 徽章权益展示配置

### 7.1 权益中心展示

权益中心的前端页面由迪士尼提供，但需要提供相应能力和对应接口给前端调用

#### 7.1.1 支持提供开放给到会员的所有权益数据

#### 7.1.2 支持按特定条件进行权益排序，例如：所需兑换的徽章数量、权益兑换数量，等等

#### 7.1.3 支持按特定条件进行权益搜索和筛选，例如：权益名称、权益类型、可兑换的时间，等等

### 7.2 权益详情页展示

#### 7.2.1 支持提供相应接口给前端调用，用于权益详情页上的信息展示，包含：权益名称、权益类型、描述、权益可兑换时间，等等

### 7.3 历史权益兑换页面展示

#### 7.3.1 支持提供相应接口给前端调用，用于历史权益兑换页面上的信息展示，包含：权益名称、权益类型、获得的时间、权益状态（未使用/已核销），等等

## 8. 后台配置体验

### 8.1 支持通过画布形式进行配置，并支持拖拉拽等便捷配置操作

### 8.2 支持「配置即所得」，即配置完可以直接在页面查看前端呈现的效果

## 9. 徽章和权益数据统计与分析

### 9.1 徽章运营看板

#### 9.1.1 系统自动统计并可视化展示各徽章的核心数据，包括徽章创建数量、发放数量、会员获取率（获取人数/符合条件人数）、徽章兑换数量、徽章兑换率（兑换人数/获取人数）、人均徽章获取数量、权益获取数量、权益核销率，等等

#### 9.1.2 数据支持按每日/周/月/季/年，以及按自定义时间区间，进行筛选和统计

#### 9.1.3 数据支持按徽章名称、徽章类型等多维度进行筛选和统计

### 9.2 会员徽章和行为视图

输入会员ID或手机号，可查看该会员的360画像，分析会员的偏好和权益使用情况

#### 9.2.1 徽章互动行为分析：统计并分析会员的徽章获得率、徽章类型占比、徽章获得场景、徽章兑换率、徽章获取/兑换时间，等等

#### 9.2.2 权益使用行为分析：统计并分析权益核销场景、权益核销时间、金额、权益获得到核销的时间周期，等等

#### 9.2.3 会员行为分析：统计会员基本信息、消费数据、互动数据等等，并分析会员的偏好

#### 9.2.4 会员徽章和行为视图支持按需配置展示模块，创建多个dashboard

#### 9.2.5 会员徽章和行为视图支持嵌入到迪士尼其他系统中（例如：客服系统，乐园核销端系统，等等）

### 9.3 数据可视化和导出

#### 9.3.1 数据支持通过柱状图、饼图、折线图、漏斗等形式将徽章运营数据、会员行为数据等进行可视化展示，直观呈现数据变化趋势和分布情况

#### 9.3.2 支持点击数据图表钻取详情

#### 9.3.3 支持有权限的操作人根据需求自定义报表，可选择需要统计的指标、数据维度和展示方式，生成个性化报表

#### 9.3.4 支持将统计数据和报表导出为Excel、PDF、CSV等格式，方便管理员进行离线分析、数据存档或与其他系统（如数据分析工具）进行数据整合

## 10. 系统账号和权限配置

### 10.1 支持多角色权限分配与管理，包括但不限于：系统管理员，会员运营人员，内容配置人员等

### 10.2 支持按单个功能模块设置角色对应的权限

## 11. 系统日志和告警

### 11.1 系统操作日志：详细记录操作人在系统中进行的所有操作信息，包含：操作人、时间、涉及的模块、变更内容，等等

### 11.2 监测和告警

#### 11.2.1 监控范围：覆盖基础资源（CPU、内存、磁盘、网络）、应用指标（QPS、延迟、错误率等）、关键业务指标（徽章发放失败量、徽章兑换量、徽章兑换失败量、权益发放量、权益发放失败量，等等）及安全指标（接口异常请求量、接口请求参数异常、用户端高频操作行为，等等）

#### 11.2.2 告警机制：支持邮件、短信、企业微信、Teams 等告警方式，并记录异常类型、触发原因、发生时间、异常IP/设备/账号、请求详情（路径、参数、次数）等等

#### 11.2.3 支持设置告警阈值与接收人，不同级别异常可指定不同接收人

#### 11.2.4 监控与日志数据可通过标准协议或 API 接入 SHDR 现有监控/日志平台（如 Prometheus、ELK、阿里云日志服务等）

### 11.3 异常请求处置

#### 11.3.1 支持分级处置异常请求，可自定义分级条件和处置方案，例如：

- 轻度异常（例如：1分钟内请求20-50次）采取限流措施（例如：限制该IP/设备/账号后续10分钟内请求频率≤10次/分钟）
- 中度异常（例如：1分钟内请求50-100次，请求参数异常）采取临时封禁（例如：封禁IP/设备/账号30分钟，封禁兑换徽章等操作30 分钟）并拦截请求
- 重度异常（例如：1分钟内请求≥100次）采取永久封禁（例如：永久封禁IP/设备/账号，封禁兑换徽章等操作）并拦截请求

#### 11.3.2 支持手动解除封禁，但仅针对部分账号权限开放，解除操作需记录日志（操作人、时间、原因），日志可导出

#### 11.3.3 支持对接迪士尼内部系统（例如：账户系统，运维

#### 11.3.4 相关系统，优惠券系统，等等），实现徽章/权益相关请求数据同步，以及对接相关系统实现处置方案

## 12. 系统性能与容量需求

### 12.1 核心性能指标

供应商必须确保所提供的系统在生产环境中满足以下最低性能指标。所有指标均指在满足本RFP规定的功能完整性、数据一致性及高可用性要求前提下的系统表现。

### 12.2 高并发处理能力

- 核心业务接口TPS：在典型业务负载下，系统核心业务接口（例如：徽章查询、资格验证、徽章发放触发，等等）需支持不低于 【1000】 的稳定事务处理量（TPS）。
- 峰值并发处理：在「大促」或「节假日」等可预见的业务高峰时段，系统需能在 【10】 分钟内弹性扩展，支持不低于 【5000】 TPS的短时峰值流量，且不出现功能性故障或核心指标（如错误率、响应时间）的显著劣化。
- 接口响应时间：
  - 95%的查询类接口（如权益列表、用户徽章状态查询）响应时间应 ≤ 【200】 毫秒。
  - 95%的事务类接口（如权益领取、徽章实时发放）响应时间应 ≤ 【500】 毫秒。
- 极端高流量处理能力：面对极端高负载，系统应设计完备的应急处理机制，包括但不限于熔断，限流，服务降级等技术方案

### 12.3 事件处理能力

- 事件吞吐量：系统从「事件追踪系统」消费并处理用户行为事件的能力，应不低于 【5,000】 事件/秒。
- 端到端处理延迟：从用户行为事件被「事件追踪系统」成功记录，到触发相应业务规则（如徽章发放）并完成所有关联系统（如调用Coupon服务）调用的端到端处理延迟，P99分位数应 ≤ 【1】 秒。
- 积压处理能力：在短暂故障恢复后，系统需能快速处理积压的事件消息，其回追速度不低于正常吞吐量的 【1.5】 倍。

### 12.4 数据存储与访问能力

- 数据存储容量：系统设计方案需支持未来 【5】 年内的业务数据增长，包括但不限于用户权益关系、徽章授予记录、操作日志等。
- 数据查询性能：
  - 针对用户维度的关键数据（如用户所有徽章、近期权益）的查询，响应时间P95应 ≤ 【200】 毫秒。
  - 复杂分页查询（如运营后台按条件筛选用户权益列表）在单表记录数达到千万级时，响应时间P95应 ≤ 【3】 秒。
- 数据可靠性：所有持久化数据必须保证不低于99.99%的可用性，并具备可靠的数据备份与恢复机制，RPO（declared disaster, 恢复点目标）≤30分钟，RTO（declared disaster, 恢复时间目标）≤ 8 小时。

# II. Membership E-badge System 技术需求

## 1. E-badge 应用级架构需求

乙方需要根据甲方指定的应用技术架构设计交付系统功能 (绿色部分为供应商交付的服务或应用，黄色部分为采购方服务或应用，供应商需要完成对接。消息队列，存储层，服务层的基础设施由采购方提供) : 
 

需要交付的服务和应用参考如下表格（不包含C端的会员权益中心前端应用）：

| Application Name           | Fronted/Backend | Description |
| -------------------------- | --------------- | ----------- |
| event-engagement-service   | Backend         | badge 系统中，收取并处理相对直接，业务相耦合度低的上游行为等事件，事件量比较大，并发相对高 |
| event-transaction-service  | Backend         | badge 系统中，收取并处理相对复杂，业务耦合度高的上游订单等事件，事件量相对小，并发相对低 |
| badge-management-service   | Backend         | badge 系统中，直接处理 C 端相关业务的 service |
| badge-admin-service        | Backend         | badge 系统中，处理 B 端配置以及报表相关功能的 service |
| badge-admin-UI             | Frontend        | 补偿发放徽章的 admin UI 以及对 badge 进行管理配置的 admin UI，会嵌入 CSP portal 和 UAP portal |
| unified-rule-engine        | Backend         | badge 系统底层依赖的规则引擎服务，支撑 badge 系统的灵活规则配置，需要隔离出单体服务，可以在未来灵活复用 |

## 2. E-badge 架构规范需求

### 2.1 后端微服务架构需求
供应商必须严格依据采购方提供的 微服务架构设计模版 进行后端系统的设计、开发与部署。该方案定义了微服务的划分原则、服务边界、服务层级、技术栈及部署模型。供应商不得擅自更改架构的整体设计理念、服务拆分模式及约定的技术决策，对应的技术变更需要按照SHDR 技术变更流程。

### 2.2 服务定义与职责边界存储架构需求

#### 2.2.1 供应商必须严格按照采购方定义的微服务目录（服务清单）进行开发，每个微服务的名称、唯一标识、核心职责、数据领域必须与设计方案完全一致。

#### 2.2.2 供应商不得在未获采购方书面批准的情况下，合并、拆分或变更任何已定义微服务的业务职责与数据边界。

### 2.3 服务间通信规范

#### 2.3.1 通信协议与格式：微服务之间的所有通信必须遵循采购方指定的协议（如HTTP/gRPC）和消息格式标准（如RESTful API规范、Protobuf定义）。

#### 2.3.2 API约束：服务对外暴露的API接口，其设计、版本管理策略及命名规范须符合采购方制定的统一标准。

#### 2.3.3 治理集成：服务间调用必须集成至采购方指定的服务治理框架（如基于阿里云MSE或自建方案），实现统一的流量管理、路由、熔断与降级，并满足采购方的安全认证与鉴权要求。

### 2.4 服务治理与可观测性

#### 2.4.1 每个微服务必须内嵌并暴露符合采购方标准的健康检查端点、监控指标（Metrics）和链路追踪（Tracing）信息，并接入采购方统一的监控告警与可观测性平台。

#### 2.4.2 微服务的配置管理必须遵循采购方指定的SHDR统一配置方案(Nacos 或 ETCD 或其他指定配置中心解决方案)，实现配置的外部化、版本化与动态刷新。

### 2.5 交付物与验证要求

#### 2.5.1 架构符合性说明：供应商需在详细设计文档中，以专章详细阐述其实现方案如何精准匹配采购方的架构设计方案，并映射每一个服务与设计要求的对应关系。

#### 2.5.2 接口文档：提供完整的、符合采购方模板的API接口文档（如OpenAPI规范文件）。

#### 2.5.3 部署清单与拓扑图：提供清晰的服务部署清单及运行时拓扑关系图，明确展示服务实例、依赖关系及网络通信路径。

#### 2.5.4 审计与验收：采购方有权对服务边界、通信协议、治理策略的实现进行代码审计或专项测试。任何偏离架构方案的设计都将被视为不符合项，供应商须无条件整改。

## 3. E-Badge 与 SHDR 现有系统的集成需求

### 3.1 对接系统范围

供应商开发的后端系统，必须与采购方现有或指定的以下核心业务系统实现稳定、可靠、安全的双向或单向集成：

- 订单服务：用于获取游客的订单、商品及支付状态信息。
- Profile服务：用于获取游客的账户资料、会员等级等核心档案信息及其变更。
- Coupon服务：用于向符合条件的游客发放、核销各类优惠权益。
- IRP系统：用于获取、验证及核销游客的特权活动预约资格。
- 事件追踪系统：用于实时或准实时获取游客在产品内的行为事件数据，作为徽章发放等业务规则的核心触发依据。
- SHDR官方应用：作为后端服务，为SHDR官方前端应用（如App、小程序）的「权益中心」等模块提供数据与业务逻辑支撑。
- Search服务：集成SHDR的检索服务，同步徽章和权益的信息到检索系统，提供检索能力。
- 风控系统：集成SHDR的风控系统，对于高危和潜在的黄牛行为进行识别并预警，需要根据风险等级采取对应的策略。
- 其他指定服务：包括但可能不限于采购方指定的其他内部管理、消息推送、数据分析等辅助性服务。无论其业务量级大小，供应商均需遵循同等标准的集成规范。

### 3.2 对接职责与规范要求

供应商须遵循采购方就上述每个集成点提供的详细接口规范，并满足以下通用及特定要求。

#### 3.2.1 通用接口规范

- 协议与格式：所有跨系统接口必须严格遵循采购方制定的通信协议（如HTTPS、gRPC）和报文数据格式标准（如JSON Schema、Protobuf）。
- 认证与授权：所有接口调用必须集成采购方统一的企业级身份认证与授权机制，确保接口访问安全可控。
- 监控与治理：所有外部调用必须接入采购方指定的API管理平台或服务网格，实现调用链追踪、性能监控、熔断限流及统一日志管理。
- 版本管理：必须遵循采购方的接口版本管理策略，保证向后兼容性，任何破坏性变更需提前协商并获书面批准。

#### 3.2.2 与「订单服务」对接要求

- 需实现按指定查询条件（如游客ID、时间范围、订单状态）拉取或订阅订单信息变更。
- 需明确处理订单状态同步的最终一致性方案，并承担因信息不一致引发的业务问题修复责任。

#### 3.2.3 与「Profile服务」对接要求

- 需实现实时查询游客基础档案与会员信息。
- 如需监听档案变更事件，必须基于采购方指定的事件总线（如消息队列）实现，并保证消息处理的幂等性。

#### 3.2.4 与「Coupon服务」对接要求

- 需严格按照业务规则，在指定场景下调用发券、作废接口，并确保每次发放均有准确的业务日志和发放依据记录。
- 需实现发放失败后的重试与告警机制，并对发放结果进行对账，确保数据一致性。

#### 3.2.5 与「IRP系统」对接要求

- 需实现实时查询游客的预约资格、预约余量，并安全、准确地调用资格核销接口。
- 需设计高可靠的异常处理机制，应对预约系统临时不可用等场景，保障核心流程不受阻断。

#### 3.2.6 与「事件追踪系统」对接要求

- 必须通过采购方指定的方式（如消息队列订阅、事件流消费）从事件追踪系统获取标准化的用户行为事件，并严格遵循事件数据格式规范。
- 需基于特定行为事件，实时、准确地触发徽章发放等核心业务规则，并保证处理过程的幂等性与最终一致性。
- 需设计健壮的事件处理与错误恢复机制，确保在系统短暂故障或事件格式异常时，不影响核心业务流程，并能实现数据补发或重新处理。

#### 3.2.7 对「SHDR官方应用」的支撑要求

- 需提供高性能、高可用的API，支撑权益中心的数据查询、列表展示、权益详情、实时资格判断等核心功能。
- 需遵循采购方的前后端数据交互规范，并针对高并发场景进行专项设计与性能测试。

#### 3.2.8 与「其他指定服务」对接要求

- 对于本条款1中提及的「其他指定服务」及项目实施过程中采购方书面通知需对接的其他系统，供应商应遵循与本条款同等的标准与规范，积极响应并完成对接。其工作量将被视为已包含在项目整体范围内，除非该对接需求构成对原始工作范围的重大变更。

### 3.3 交付物与验收标准

#### 3.3.1 接口定义文档：供应商需提供符合采购方模板的、详尽的所有对外暴露及依赖的外部接口API文档。

#### 3.3.2 集成方案说明书：详细阐述与每个上下游系统的集成技术方案、数据流图、异常处理及容错制。

#### 3.3.3 联调测试报告：提供与各上下游系统进行双向联调测试的完整报告，证明所有接口功能、性能，安全及异常场景处理均符合要求。

#### 3.3.4 生产就绪证明：系统上线前，需通过采购方组织的集成专项评审，确认其对接方案满足生产环境的稳定性、安全性与可观测性要求。

## 4. 技术栈需求

### 4.1 交付遵循指定技术栈规范

供应商为本项目提供的全部软件解决方案，其前端、后端、数据库、中间件、基础设施及工具链等所有技术组件，均须严格且无条件地遵循采购方随本RFP文件发布的《技术栈规范》（见附件 [Tech Stack Heatmap_SHDR.pdf]）。该规范明确规定了采购方允许使用的技术、框架、语言、版本及部署架构。供应商必须完全依据此规范进行系统设计、开发、构建和部署。

### 4.2 供应商责任与交付物

#### 4.2.1 架构合规：供应商提交的技术架构设计方案，必须明确体现对采购方《技术栈规范》的百分之百遵循，并作为方案评审的强制性通过标准。

#### 4.2.2 清单交付：在系统部署前，供应商须提供详细的《最终技术栈清单》，逐项确认所有软件组件的名称、版本、许可证类型，并附上正式的符合性声明，保证与附件规范完全一致。

#### 4.2.3 知识产权与安全：所使用的全部技术栈组件均须具备合法授权，不得引入采购方规范中禁止的、或存在已知高危安全漏洞及许可证冲突的组件。采购方有权对任何组件进行审查。

# III. Membership E-badge System 其他需求

## 1. 部署与运维支持需求

### 1.1 部署目标与环境要求
供应商必须配合采购方，在由采购方指定或提供的阿里云VPC私有环境中，完成其提供的软件产品、解决方案及相关组件的全栈部署与集成。供应商须确保其系统能够适配采购方定义的阿里云基础架构（如ECS、VPC、容器服务、数据库等），并满足采购方的网络安全、资源规格与高可用性架构要求。

### 1.2 严格遵守 SHDR DevOps 标准

供应商在软件开发、集成、部署、运维的全生命周期内，必须严格遵循采购方指定的SHDR（示例名称，请根据实际情况确认其全称/含义）DevOps标准规范。该规范通常包括但不限于：

- 开发与安全规范：代码分支管理策略、代码静态检查、安全编码规范。
- 自动化流水线：与采购方环境兼容的持续集成/持续部署（CI/CD）流水设计与实施，确保自动化构建、测试、安全扫描与部署。
- 镜像与制品管理：使用采购方指定的私有镜像仓库进行容器镜像存储与管理，遵循镜像安全扫描与版本管控要求。
- 基础设施即代码：使用采购方认可的模板或工具（如Terraform, Ansible）进行环境配置与管理，确保环境可重复、可追溯。
- 监控与日志：集成至采购方统一的监控告警与日志分析平台（如基于阿里云SLS, ARMS等），提供符合标准的应用监控指标、日志格式与错误追踪信息。
- 安全与合规：满足采购方在等保、数据安全等方面的基线配置要求，包括但不限于漏洞管理、密钥管理、网络访问控制等。

## 2. 敏捷开发与验收需求

### 2.1 遵循敏捷开发规范
供应商应严格采用业界通用的敏捷开发方法（如Scrum、Kanban等）执行项目，并确保团队具备完整的敏捷角色（如产品负责人、敏捷教练、开发团队等）。供应商需在项目启动前提交具体的敏捷执行计划，明确迭代周期（建议2周）、每日站会、迭代规划会、评审会及回顾会等敏捷活动的安排，并承诺在开发过程中持续遵循敏捷原则，灵活响应需求变更，确保开发过程透明、协作高效。

### 2.2 按迭代（Sprint）配合成果验收

供应商需以迭代（Sprint）为单元定期交付可演示、可测试的开发成果，并在每个迭代结束后主动安排验收会议，邀请采购方参与评审。每个迭代的交付物至少包括：可运行的功能增量、迭代燃尽图/任务看板、测试报告及必要的技术文档。采购方有权对迭代交付成果提出验收意见，供应商需在后续迭代中及时调整。若某一迭代交付成果未达到验收标准，供应商应在采购方要求的时间内完成修正，且不影响整体项目进度。

### 2.3 交付物与沟通要求

供应商需通过协同工具JIRA,实时共享产品待办列表、迭代任务及进度信息，并每周提交敏捷项目状态报告，包含当前迭代进展、风险与问题清单、下一迭代计划等内容。双方应指定固定对接人，确保需求澄清、问题反馈与变更沟通的及时性。

### 2.4 交付物与沟通要求

如采购方在迭代过程中提出合理需求变更，供应商应评估变更对范围、进度及成本的影响，并在双方协商一致后调整产品待办列表优先级，确保变更过程规范、可追溯。

### 2.5 敏捷成熟度与团队稳定性

供应商应确保投入项目的团队具备稳定的敏捷实施经验，未经采购方同意不得随意更换核心成员。保障关键文档与代码的实时更新与可追溯性。

### 2.6 项目开发过程中计划变更规范

项目的开发计划会在项目启动会中明确里程碑，以及各个迭代周期内的具体开发任务，供应商需要严格按照计划执行，如果涉及变更，供应商需要提供具体的原因及对应的改进计划，经过采购方review 并且批准以后才能实施进行。

## 3. 安全需求

### 3.1 鉴权与访问控制

后台管理系统需接入 MYID，实现 SSO，并支持 MFA。

### 3.2 网络与防护

全链路使用 HTTPS，TLS 版本不低于 1.2，禁用不安全算法套件。
支持限流、封禁等能力，对异常流量和恶意请求进行防护，并记录日志。
抗 DDoS 攻击：支持恶意请求的清洗，确保正常用户访问不受影响。

### 3.3 数据安全
用户数据传输全程加密，敏感数据在存储和日志中需加密或脱敏，不得以明文保存，需要支持字段级别的加密能力。
采用安全的密钥管理机制，密钥不允许硬编码，支持生成、轮换和回收流程。
